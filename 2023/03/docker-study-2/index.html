<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">
<link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/downloads/images/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/downloads/images/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/downloads/images/favicon/favicon-16x16.png">
  <link rel="mask-icon" href="/downloads/images/favicon/favicon.svg" color="#222">
  <meta name="google-site-verification" content="_2OctYreBeDkfTRiEHaXwB0wYaMK6F84qG97fNjM4qc">
  <meta name="msvalidate.01" content="84BDF5B17B36630CC4297E351B2B0D64">
  <meta name="baidu-site-verification" content="code-kuUu52WEwj">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.tanglijin.top","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.17.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"style":"flat","show_result":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"utterances","storage":true,"lazyload":true,"nav":{"utterances":{"order":-1},"changyan":{"text":"畅言","order":0},"livere":{"text":"来必力","order":1},"valine":{"order":2},"disqus":{"order":3},"disqusjs":{"order":4},"gitalk":{"order":5},"giscus":{"order":6}},"activeClass":"utterances"},"stickytabs":true,"motion":{"enable":true,"async":true,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"algolia":{"appID":"HWL3YK5R6C","apiKey":"17ce0bb5e5dc71bf5e3e37006cc05b55","indexName":"blog","hits":{"per_page":10}}}</script><script src="/js/config.js"></script>

    <meta name="description" content="目录   Docker 学习 1. 原理  Docker 学习 2. 常用命令  Docker 学习 3. 编写 Dockerfile  Docker 学习 4. Docker引擎架构  Docker 学习 5. 容器退出命令  Docker 学习 6. 镜像导入导出和容器导入导出的区别  Docker 学习 7. Docker Cache  Docker 学习 8. 数据卷持久化  Docker">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker 学习 2. 常用命令">
<meta property="og:url" content="https://www.tanglijin.top/2023/03/docker-study-2/index.html">
<meta property="og:site_name" content="唐李锦的空间">
<meta property="og:description" content="目录   Docker 学习 1. 原理  Docker 学习 2. 常用命令  Docker 学习 3. 编写 Dockerfile  Docker 学习 4. Docker引擎架构  Docker 学习 5. 容器退出命令  Docker 学习 6. 镜像导入导出和容器导入导出的区别  Docker 学习 7. Docker Cache  Docker 学习 8. 数据卷持久化  Docker">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-03-17T12:31:00.000Z">
<meta property="article:modified_time" content="2023-06-09T02:20:28.390Z">
<meta property="article:author" content="唐李锦">
<meta property="article:tag" content="Docker">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://www.tanglijin.top/2023/03/docker-study-2/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://www.tanglijin.top/2023/03/docker-study-2/","path":"2023/03/docker-study-2/","title":"Docker 学习 2. 常用命令"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Docker 学习 2. 常用命令 | 唐李锦的空间</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WSZ6XMJ0XL"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-WSZ6XMJ0XL","only_pageview":false}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?85df606204b9d08c7ff41bedceef09f7"></script>







  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="唐李锦的空间" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">唐李锦的空间</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">64</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">16</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">69</span></a></li><li class="menu-item menu-item-commonweal"><a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a></li><li class="menu-item menu-item-友情链接"><a href="/links/" rel="section"><i class="fa fa-link fa-fw"></i>友情链接</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container">
  <div class="algolia-stats"><hr></div>
  <div class="algolia-hits"></div>
  <div class="algolia-pagination"></div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B-Docker-%E7%89%88%E6%9C%AC"><span class="nav-number">1.</span> <span class="nav-text">查看 Docker 版本</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B-Docker-%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF"><span class="nav-number">2.</span> <span class="nav-text">查看 Docker 详细信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%95%9C%E5%83%8F"><span class="nav-number">3.</span> <span class="nav-text">镜像</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%9C%AC%E5%9C%B0%E9%95%9C%E5%83%8F%E5%88%97%E8%A1%A8"><span class="nav-number">3.1.</span> <span class="nav-text">查看本地镜像列表</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%90%9C%E7%B4%A2%E6%82%AC%E8%99%9A%E9%95%9C%E5%83%8F"><span class="nav-number">3.1.1.</span> <span class="nav-text">搜索悬虚镜像</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE-created-%E6%90%9C%E7%B4%A2"><span class="nav-number">3.1.2.</span> <span class="nav-text">根据 created 搜索</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE-repository-%E5%92%8C-tag-%E6%A8%A1%E7%B3%8A%E6%90%9C%E7%B4%A2"><span class="nav-number">3.1.3.</span> <span class="nav-text">根据 repository 和 tag 模糊搜索</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%90%9C%E7%B4%A2-Hub-%E4%B8%AD%E9%95%9C%E5%83%8F"><span class="nav-number">3.2.</span> <span class="nav-text">搜索 Hub 中镜像</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%90%9C%E7%B4%A2-Docker-%E5%AE%98%E6%96%B9%E5%8F%91%E5%B8%83%E7%9A%84%E9%95%9C%E5%83%8F"><span class="nav-number">3.2.1.</span> <span class="nav-text">搜索 Docker 官方发布的镜像</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%99%90%E5%88%B6-stars-%E6%9C%80%E5%B0%8F%E6%95%B0%E6%90%9C%E7%B4%A2"><span class="nav-number">3.2.2.</span> <span class="nav-text">限制 stars 最小数搜索</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8B%89%E5%8F%96-Hub-%E4%B8%AD%E9%95%9C%E5%83%8F"><span class="nav-number">3.3.</span> <span class="nav-text">拉取 Hub 中镜像</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A7%BB%E9%99%A4%E6%9C%AC%E5%9C%B0%E9%95%9C%E5%83%8F"><span class="nav-number">3.4.</span> <span class="nav-text">移除本地镜像</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%B9%E9%87%8F%E7%A7%BB%E9%99%A4%E6%9C%AC%E5%9C%B0%E9%95%9C%E5%83%8F"><span class="nav-number">3.5.</span> <span class="nav-text">批量移除本地镜像</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%B9%E9%87%8F%E7%A7%BB%E9%99%A4%E6%82%AC%E8%99%9A%E9%95%9C%E5%83%8F"><span class="nav-number">3.6.</span> <span class="nav-text">批量移除悬虚镜像</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%BC%E5%87%BA%E9%95%9C%E5%83%8F"><span class="nav-number">3.7.</span> <span class="nav-text">导出镜像</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%BC%E5%85%A5%E9%95%9C%E5%83%8F"><span class="nav-number">3.8.</span> <span class="nav-text">导入镜像</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E9%95%9C%E5%83%8F%E8%AF%A6%E6%83%85"><span class="nav-number">3.9.</span> <span class="nav-text">查看镜像详情</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E9%95%9C%E5%83%8F%E5%8E%86%E5%8F%B2%EF%BC%88%E5%88%86%E5%B1%82%EF%BC%89"><span class="nav-number">3.10.</span> <span class="nav-text">查看镜像历史（分层）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%99%E9%95%9C%E5%83%8F%E9%87%8D%E8%B4%B4tag"><span class="nav-number">3.11.</span> <span class="nav-text">给镜像重贴tag</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%B9%E5%99%A8"><span class="nav-number">4.</span> <span class="nav-text">容器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%B9%B6%E8%BF%90%E8%A1%8C%E5%AE%B9%E5%99%A8"><span class="nav-number">4.1.</span> <span class="nav-text">创建并运行容器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B-Docker-%E5%AE%B9%E5%99%A8%E5%88%97%E8%A1%A8"><span class="nav-number">4.2.</span> <span class="nav-text">查看 Docker 容器列表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A7%BB%E9%99%A4%E5%AE%B9%E5%99%A8"><span class="nav-number">4.3.</span> <span class="nav-text">移除容器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4%E5%AE%B9%E5%99%A8"><span class="nav-number">4.4.</span> <span class="nav-text">批量删除容器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8"><span class="nav-number">4.5.</span> <span class="nav-text">启动容器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%81%9C%E6%AD%A2%E5%AE%B9%E5%99%A8%E8%BF%90%E8%A1%8C"><span class="nav-number">4.6.</span> <span class="nav-text">停止容器运行</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%98%E9%9B%85%E5%81%9C%E6%AD%A2"><span class="nav-number">4.6.1.</span> <span class="nav-text">优雅停止</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%BA%E5%88%B6%E5%81%9C%E6%AD%A2"><span class="nav-number">4.6.2.</span> <span class="nav-text">强制停止</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%B9%E9%87%8F%E5%81%9C%E6%AD%A2"><span class="nav-number">4.7.</span> <span class="nav-text">批量停止</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%B9%E5%99%A8%E9%87%8D%E5%90%AF"><span class="nav-number">4.8.</span> <span class="nav-text">容器重启</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%B9%E5%99%A8%E5%81%9C%E6%AD%A2"><span class="nav-number">4.9.</span> <span class="nav-text">容器停止</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%93%E5%8D%B0%E5%AE%B9%E5%99%A8%E6%97%A5%E5%BF%97"><span class="nav-number">4.10.</span> <span class="nav-text">打印容器日志</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%9B%E5%85%A5%E6%AD%A3%E5%9C%A8%E8%BF%90%E8%A1%8C%E7%9A%84%E5%AE%B9%E5%99%A8%E7%A9%BA%E9%97%B4%E5%86%85"><span class="nav-number">4.11.</span> <span class="nav-text">进入正在运行的容器空间内</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF"><span class="nav-number">4.12.</span> <span class="nav-text">查看容器详细信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%E6%83%85%E5%86%B5"><span class="nav-number">4.13.</span> <span class="nav-text">查看容器端口转发情况</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8F%90%E4%BA%A4%E5%AE%B9%E5%99%A8"><span class="nav-number">4.14.</span> <span class="nav-text">提交容器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%B9%E5%AE%B9%E5%99%A8%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4"><span class="nav-number">4.15.</span> <span class="nav-text">对容器执行命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#exec-%E5%91%BD%E4%BB%A4"><span class="nav-number">4.15.1.</span> <span class="nav-text">exec 命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#attach-%E5%91%BD%E4%BB%A4"><span class="nav-number">4.15.2.</span> <span class="nav-text">attach 命令</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E6%AD%A3%E5%9C%A8%E8%BF%90%E8%A1%8C%E7%9A%84%E8%BF%9B%E7%A8%8B"><span class="nav-number">4.16.</span> <span class="nav-text">查看容器正在运行的进程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E6%97%A5%E5%BF%97"><span class="nav-number">4.17.</span> <span class="nav-text">查看容器日志</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%B9%E5%99%A8%E5%92%8C%E5%AE%BF%E4%B8%BB%E6%9C%BA%E6%96%87%E4%BB%B6%E4%BA%92%E6%8B%B7"><span class="nav-number">4.18.</span> <span class="nav-text">容器和宿主机文件互拷</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%BC%E5%87%BA%E5%AE%B9%E5%99%A8%E5%88%B0-tar"><span class="nav-number">4.19.</span> <span class="nav-text">导出容器到 tar</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%BC%E5%85%A5%E5%AE%B9%E5%99%A8-tar-%E6%96%87%E4%BB%B6%E6%88%90%E9%95%9C%E5%83%8F"><span class="nav-number">4.20.</span> <span class="nav-text">导入容器 tar 文件成镜像</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E8%BF%90%E8%A1%8C%E7%9A%84%E5%AE%B9%E5%99%A8%E5%8D%A0%E7%94%A8%E7%9A%84%E8%B5%84%E6%BA%90"><span class="nav-number">4.21.</span> <span class="nav-text">查看运行的容器占用的资源</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F"><span class="nav-number">5.</span> <span class="nav-text">系统</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E7%A3%81%E7%9B%98%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5"><span class="nav-number">5.1.</span> <span class="nav-text">查看磁盘使用情况</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%9C%8D%E5%8A%A1%E6%97%A5%E5%BF%97"><span class="nav-number">5.2.</span> <span class="nav-text">获取服务日志</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%AE%9E%E6%97%B6%E4%BA%8B%E4%BB%B6"><span class="nav-number">5.3.</span> <span class="nav-text">获取实时事件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A7%BB%E9%99%A4%E4%B8%8D%E4%BD%BF%E7%94%A8%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="nav-number">5.4.</span> <span class="nav-text">移除不使用的数据</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C"><span class="nav-number">6.</span> <span class="nav-text">网络</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E7%BD%91%E7%BB%9C"><span class="nav-number">6.1.</span> <span class="nav-text">查看所有网络</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E7%BD%91%E7%BB%9C"><span class="nav-number">6.2.</span> <span class="nav-text">创建网络</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%AE%B9%E5%99%A8%E6%8C%87%E5%AE%9Abridge"><span class="nav-number">6.3.</span> <span class="nav-text">创建容器指定bridge</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%87%E5%AE%9A%E5%AE%B9%E5%99%A8%E5%92%8Cbridge%E7%BD%91%E7%BB%9C%E9%93%BE%E6%8E%A5"><span class="nav-number">6.4.</span> <span class="nav-text">指定容器和bridge网络链接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%AE%B9%E5%99%A8%E6%8C%87%E5%AE%9A%E5%92%8C%E5%88%AB%E7%9A%84%E5%AE%B9%E5%99%A8%E5%85%B1%E4%BA%AB%E7%BD%91%E5%8D%A1"><span class="nav-number">6.5.</span> <span class="nav-text">创建容器指定和别的容器共享网卡</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="唐李锦"
      src="/downloads/images/avatar.png">
  <p class="site-author-name" itemprop="name">唐李锦</p>
  <div class="site-description" itemprop="description">我的名字叫唐李锦，这是我的空间。</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">69</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">64</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="/downloads/images/wechat.png" title="微信 → &#x2F;downloads&#x2F;images&#x2F;wechat.png" rel="noopener me"><i class="fa fa-comments fa-fw"></i>微信</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://github.com/ljtang2009" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ljtang2009" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:ho_ho_gl@hotmail.com" title="E-Mail → mailto:ho_ho_gl@hotmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml" rel="noopener me"><i class="fa fa-rss fa-fw"></i>RSS</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.tanglijin.top/2023/03/docker-study-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/downloads/images/avatar.png">
      <meta itemprop="name" content="唐李锦">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="唐李锦的空间">
      <meta itemprop="description" content="我的名字叫唐李锦，这是我的空间。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Docker 学习 2. 常用命令 | 唐李锦的空间">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Docker 学习 2. 常用命令
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-03-17 20:31:00" itemprop="dateCreated datePublished" datetime="2023-03-17T20:31:00+08:00">2023-03-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-06-09 10:20:28" itemprop="dateModified" datetime="2023-06-09T10:20:28+08:00">2023-06-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Docker-%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">Docker 学习</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><details class="note info no-icon"><summary><p>目录</p>
</summary>
<ul>
<li><p><a href="/2023/03/docker-study-1/" title="Docker 学习 1. 原理">Docker 学习 1. 原理</a></p>
</li>
<li><p><a href="/2023/03/docker-study-2/" title="Docker 学习 2. 常用命令">Docker 学习 2. 常用命令</a></p>
</li>
<li><p><a href="/2023/03/docker-study-3/" title="Docker 学习 3. 编写 Dockerfile">Docker 学习 3. 编写 Dockerfile</a></p>
</li>
<li><p><a href="/2023/05/docker-study-4/" title="Docker 学习 4. Docker引擎架构">Docker 学习 4. Docker引擎架构</a></p>
</li>
<li><p><a href="/2023/05/docker-study-5/" title="Docker 学习 5. 容器退出命令">Docker 学习 5. 容器退出命令</a></p>
</li>
<li><p><a href="/2023/05/docker-study-6/" title="Docker 学习 6. 镜像导入导出和容器导入导出的区别">Docker 学习 6. 镜像导入导出和容器导入导出的区别</a></p>
</li>
<li><p><a href="/2023/05/docker-study-7/" title="Docker 学习 7. Docker Cache">Docker 学习 7. Docker Cache</a></p>
</li>
<li><p><a href="/2023/05/docker-study-8/" title="Docker 学习 8. 数据卷持久化">Docker 学习 8. 数据卷持久化</a></p>
</li>
<li><p><a href="/2023/05/docker-study-9/" title="Docker 学习 9. Docker 本地网络">Docker 学习 9. Docker 本地网络</a></p>
</li>
</ul>

</details>


<h2 id="查看-Docker-版本"><a href="#查看-Docker-版本" class="headerlink" title="查看 Docker 版本"></a>查看 Docker 版本</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker version</span><br></pre></td></tr></table></figure>

<h2 id="查看-Docker-详细信息"><a href="#查看-Docker-详细信息" class="headerlink" title="查看 Docker 详细信息"></a>查看 Docker 详细信息</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker info</span><br><span class="line"><span class="comment"># 或者查看某项信息</span></span><br><span class="line">docker info |grep Root</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<h2 id="镜像"><a href="#镜像" class="headerlink" title="镜像"></a>镜像</h2><h3 id="查看本地镜像列表"><a href="#查看本地镜像列表" class="headerlink" title="查看本地镜像列表"></a>查看本地镜像列表</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker image <span class="built_in">ls</span></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">docker images</span><br></pre></td></tr></table></figure>

<h4 id="搜索悬虚镜像"><a href="#搜索悬虚镜像" class="headerlink" title="搜索悬虚镜像"></a>搜索悬虚镜像</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images -f dangling=<span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h4 id="根据-created-搜索"><a href="#根据-created-搜索" class="headerlink" title="根据 created 搜索"></a>根据 created 搜索</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images -f [since 或 before]=[镜像标识]</span><br></pre></td></tr></table></figure>

<h4 id="根据-repository-和-tag-模糊搜索"><a href="#根据-repository-和-tag-模糊搜索" class="headerlink" title="根据 repository 和 tag 模糊搜索"></a>根据 repository 和 tag 模糊搜索</h4><p>只能搜索 Docker 官方发布的镜像。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images -f reference=<span class="string">&#x27;*:22*&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="搜索-Hub-中镜像"><a href="#搜索-Hub-中镜像" class="headerlink" title="搜索 Hub 中镜像"></a>搜索 Hub 中镜像</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search image_name</span><br></pre></td></tr></table></figure>

<h4 id="搜索-Docker-官方发布的镜像"><a href="#搜索-Docker-官方发布的镜像" class="headerlink" title="搜索 Docker 官方发布的镜像"></a>搜索 Docker 官方发布的镜像</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search image_name -f is-official=<span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h4 id="限制-stars-最小数搜索"><a href="#限制-stars-最小数搜索" class="headerlink" title="限制 stars 最小数搜索"></a>限制 stars 最小数搜索</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search mysql -f stars=100</span><br></pre></td></tr></table></figure>

<h3 id="拉取-Hub-中镜像"><a href="#拉取-Hub-中镜像" class="headerlink" title="拉取 Hub 中镜像"></a>拉取 Hub 中镜像</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull ubuntu:22.04</span><br></pre></td></tr></table></figure>

<h3 id="移除本地镜像"><a href="#移除本地镜像" class="headerlink" title="移除本地镜像"></a>移除本地镜像</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi ubuntu:latest</span><br></pre></td></tr></table></figure>

<h3 id="批量移除本地镜像"><a href="#批量移除本地镜像" class="headerlink" title="批量移除本地镜像"></a>批量移除本地镜像</h3><div class="note danger"><p>危险操作</p>
</div>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi `docker images -aq`</span><br></pre></td></tr></table></figure>

<h3 id="批量移除悬虚镜像"><a href="#批量移除悬虚镜像" class="headerlink" title="批量移除悬虚镜像"></a>批量移除悬虚镜像</h3><p>注意有关联的容器，要先把容器删除。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker image prune</span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">docker rmi $(docker images -q -f dangling=<span class="literal">true</span>)</span><br></pre></td></tr></table></figure>

<h3 id="导出镜像"><a href="#导出镜像" class="headerlink" title="导出镜像"></a>导出镜像</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image save centos:latest &gt; ~/temp/centos.tgz</span><br></pre></td></tr></table></figure>

<h3 id="导入镜像"><a href="#导入镜像" class="headerlink" title="导入镜像"></a>导入镜像</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker load -i ~/temp/centos.tgz</span><br></pre></td></tr></table></figure>

<h3 id="查看镜像详情"><a href="#查看镜像详情" class="headerlink" title="查看镜像详情"></a>查看镜像详情</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image inspect centos:latest</span><br></pre></td></tr></table></figure>

<h3 id="查看镜像历史（分层）"><a href="#查看镜像历史（分层）" class="headerlink" title="查看镜像历史（分层）"></a>查看镜像历史（分层）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">history</span> [镜像标识]</span><br></pre></td></tr></table></figure>

<h3 id="给镜像重贴tag"><a href="#给镜像重贴tag" class="headerlink" title="给镜像重贴tag"></a>给镜像重贴tag</h3><p>相当于给原镜像复制一份。imageID不变。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag [原镜像名]:[原tag] [新镜像名]:[新tag]</span><br></pre></td></tr></table></figure>

<h2 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h2><h3 id="创建并运行容器"><a href="#创建并运行容器" class="headerlink" title="创建并运行容器"></a>创建并运行容器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it ubuntu bash</span><br></pre></td></tr></table></figure>

<p>常用 options:</p>
<table>
<thead>
<tr>
<th align="center">名称</th>
<th align="center">解释</th>
<th align="center">默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="center">–detach , -d</td>
<td align="center">Run container in background and print container ID</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">–device</td>
<td align="center">Add a host device to the container</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">–env , -e</td>
<td align="center">Set environment variables</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">–env-file</td>
<td align="center">Read in a file of environment variables</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">–interactive , -i</td>
<td align="center">Keep STDIN open even if not attached</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">–mount</td>
<td align="center">Attach a filesystem mount to the container</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">–name</td>
<td align="center">Assign a name to the container</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">–network</td>
<td align="center">Connect a container to a network</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">–publish , -p</td>
<td align="center">Publish a container’s port(s) to the host</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">–pull</td>
<td align="center">Pull image before running (always, missing, never)</td>
<td align="center">missing</td>
</tr>
<tr>
<td align="center">–rm</td>
<td align="center">Automatically remove the container when it exits</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">–tty , -t</td>
<td align="center">Allocate a pseudo-TTY</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">–volume , -v</td>
<td align="center">Bind mount a volume</td>
<td align="center"></td>
</tr>
</tbody></table>
<div class="note warning"><p>容器内的进程必须处于前台运行状态，否则容器就会直接退出。自己部署一个容器运行，命令不得后台运行，前台运行即可。</p>
<p>如果容器内什么事也没做，容器也会挂掉。容器内，必须有一个进场在前台运行。</p>
</div>

<p>同创建容器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker create -it ubuntu bash</span><br></pre></td></tr></table></figure>

<h3 id="查看-Docker-容器列表"><a href="#查看-Docker-容器列表" class="headerlink" title="查看 Docker 容器列表"></a>查看 Docker 容器列表</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps --all</span><br></pre></td></tr></table></figure>

<p>还根据 image，状态，存储卷，归属网络，映射端口等条件过滤。<a target="_blank" rel="noopener" href="https://docs.docker.com/engine/reference/commandline/ps/">参考</a></p>
<h3 id="移除容器"><a href="#移除容器" class="headerlink" title="移除容器"></a>移除容器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">rm</span> a808d0f581d5</span><br></pre></td></tr></table></figure>

<h3 id="批量删除容器"><a href="#批量删除容器" class="headerlink" title="批量删除容器"></a>批量删除容器</h3><div class="note danger"><p>危险操作</p>
</div>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">rm</span> `docker ps -aq`</span><br></pre></td></tr></table></figure>

<h3 id="启动容器"><a href="#启动容器" class="headerlink" title="启动容器"></a>启动容器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start my_centos</span><br></pre></td></tr></table></figure>

<h3 id="停止容器运行"><a href="#停止容器运行" class="headerlink" title="停止容器运行"></a>停止容器运行</h3><h4 id="优雅停止"><a href="#优雅停止" class="headerlink" title="优雅停止"></a>优雅停止</h4><p>有别的客户端正在使用该容器，则无法停止。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop my_centos</span><br></pre></td></tr></table></figure>

<h4 id="强制停止"><a href="#强制停止" class="headerlink" title="强制停止"></a>强制停止</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">kill</span> my_centos</span><br></pre></td></tr></table></figure>

<h3 id="批量停止"><a href="#批量停止" class="headerlink" title="批量停止"></a>批量停止</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop `docker ps -aq`</span><br></pre></td></tr></table></figure>

<h3 id="容器重启"><a href="#容器重启" class="headerlink" title="容器重启"></a>容器重启</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker restart [容器标识]</span><br></pre></td></tr></table></figure>

<h3 id="容器停止"><a href="#容器停止" class="headerlink" title="容器停止"></a>容器停止</h3><p>容器停止这是停止容器的对外访问，不是停止整个容器。容器中运行的服务不会停止。和start, stop有本质区别。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pause [容器标识]</span><br><span class="line">docker unpause [容器标识] <span class="comment"># 恢复</span></span><br></pre></td></tr></table></figure>

<h3 id="打印容器日志"><a href="#打印容器日志" class="headerlink" title="打印容器日志"></a>打印容器日志</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f -t -n 20 my_centos</span><br></pre></td></tr></table></figure>

<p>常用 options:</p>
<table>
<thead>
<tr>
<th align="center">名称</th>
<th align="center">解释</th>
<th align="center">默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="center">–follow , -f</td>
<td align="center">Follow log output</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">–tail , -n</td>
<td align="center">Number of lines to show from the end of the logs</td>
<td align="center">all</td>
</tr>
<tr>
<td align="center">–timestamps , -t</td>
<td align="center">Show timestamps</td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="进入正在运行的容器空间内"><a href="#进入正在运行的容器空间内" class="headerlink" title="进入正在运行的容器空间内"></a>进入正在运行的容器空间内</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it ping_baidu bash</span><br></pre></td></tr></table></figure>

<h3 id="查看容器详细信息"><a href="#查看容器详细信息" class="headerlink" title="查看容器详细信息"></a>查看容器详细信息</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker container inspect ping_baidu</span><br></pre></td></tr></table></figure>

<h3 id="查看容器端口转发情况"><a href="#查看容器端口转发情况" class="headerlink" title="查看容器端口转发情况"></a>查看容器端口转发情况</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker port my_nginx</span><br></pre></td></tr></table></figure>

<h3 id="提交容器"><a href="#提交容器" class="headerlink" title="提交容器"></a>提交容器</h3><p>这一步操作相当于把容器打包成一个本地镜像。如果不指定新的 repository 和 tag，会生成悬虚镜像。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker commit -a <span class="string">&quot;Tang Lijin &lt;ho_ho_gl@hotmail.com&gt;&quot;</span> -m <span class="string">&quot;测试信息&quot;</span> my_nginx ljtang2009/centos-test-file:2023</span><br></pre></td></tr></table></figure>

<p>常用 options:</p>
<table>
<thead>
<tr>
<th align="center">名称</th>
<th align="center">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="center">-a, –author</td>
<td align="center">作者</td>
</tr>
<tr>
<td align="center">-m, –message</td>
<td align="center">附加信息</td>
</tr>
</tbody></table>
<h3 id="对容器执行命令"><a href="#对容器执行命令" class="headerlink" title="对容器执行命令"></a>对容器执行命令</h3><h4 id="exec-命令"><a href="#exec-命令" class="headerlink" title="exec 命令"></a>exec 命令</h4><p>exec 原理是在容器中创建一个新的进程，执行新的命令。所以执行命令结束后，容器不会停止。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it [容器标识] [命令，例如 /bin/bash <span class="built_in">ls</span>]</span><br></pre></td></tr></table></figure>

<h4 id="attach-命令"><a href="#attach-命令" class="headerlink" title="attach 命令"></a>attach 命令</h4><p>attach 原理是在容器中附着一个标准输入输出流，不是执行新的命令。输入和输出都影响和出自容器的主进程 command（DockerFile 的 CMD 配置，或者创建容器时指定的命令）。</p>
<p>同一个容器 attach 出来的输入输出流都会输出同样信息。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker attach [容器标识]</span><br></pre></td></tr></table></figure>

<p>例如在 ubuntu 容器中，DockerFile 的 CMD 是<code>bash</code>,  主进程是运行 bash。<br>所以 attach 到该容器可以执行 bash 上的任何操作。</p>
<p>例如在 Tomcat 容器中，DockerFile 的 CMD 配置是<code>CMD [&quot;catalina.sh&quot;, &quot;run&quot;]</code>，主进程是执行启动 Tomcat，并输出启动日志。<br>所以 attach 到该容器不能执行任何操作（除了执行停止 Tomcat 服务的操作）。</p>
<h3 id="查看容器正在运行的进程"><a href="#查看容器正在运行的进程" class="headerlink" title="查看容器正在运行的进程"></a>查看容器正在运行的进程</h3><p>top 命令可用于查看容器中的服务是否正常运行。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker top [容器标识]</span><br><span class="line"><span class="comment"># 后面可以接linux的ps参数例如 docker top [容器标识] | grep 8080</span></span><br></pre></td></tr></table></figure>

<h3 id="查看容器日志"><a href="#查看容器日志" class="headerlink" title="查看容器日志"></a>查看容器日志</h3><p>Docker 会记录容器的主进程 command（DockerFile 的 CMD 配置，或者创建容器时指定的命令）执行的日志。</p>
<p>相当于 VSCode 终端里显示的日志。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs [容器标识]</span><br></pre></td></tr></table></figure>

<p>常用 options:</p>
<table>
<thead>
<tr>
<th align="center">名称</th>
<th align="center">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="center">–since</td>
<td align="center">查询日志最早的时间点，(e.g. 2013-01-02T13:23:37Z) or (e.g. 42m for 42 minutes)</td>
</tr>
<tr>
<td align="center">–until</td>
<td align="center">查询日志最晚的时间点，(e.g. 2013-01-02T13:23:37Z) or (e.g. 42m for 42 minutes)</td>
</tr>
<tr>
<td align="center">-t, –timestamps</td>
<td align="center">显示时间戳</td>
</tr>
<tr>
<td align="center">-n, –tail</td>
<td align="center">显示条数</td>
</tr>
<tr>
<td align="center">-f, –follow</td>
<td align="center">是否动态显示，即时显示日志</td>
</tr>
</tbody></table>
<h3 id="容器和宿主机文件互拷"><a href="#容器和宿主机文件互拷" class="headerlink" title="容器和宿主机文件互拷"></a>容器和宿主机文件互拷</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 容器文件到宿主机</span></span><br><span class="line">docker <span class="built_in">cp</span> [容器标识]:[源文件地址] [目标文件地址]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 宿主机文件到容器</span></span><br><span class="line">docker <span class="built_in">cp</span> [源文件地址] [容器标识]:[目标文件地址]</span><br></pre></td></tr></table></figure>

<h3 id="导出容器到-tar"><a href="#导出容器到-tar" class="headerlink" title="导出容器到 tar"></a>导出容器到 tar</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">export</span> -o [tar文件地址在宿主机中] [容器标识]</span><br></pre></td></tr></table></figure>

<h3 id="导入容器-tar-文件成镜像"><a href="#导入容器-tar-文件成镜像" class="headerlink" title="导入容器 tar 文件成镜像"></a>导入容器 tar 文件成镜像</h3><p>不写 repository 和 tag 会生成悬虚镜像。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker import [tar文件地址在宿主机中] [repository:tag]</span><br></pre></td></tr></table></figure>

<h3 id="查看运行的容器占用的资源"><a href="#查看运行的容器占用的资源" class="headerlink" title="查看运行的容器占用的资源"></a>查看运行的容器占用的资源</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stats</span><br></pre></td></tr></table></figure>

<h2 id="系统"><a href="#系统" class="headerlink" title="系统"></a>系统</h2><p>查询帮助：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker system --<span class="built_in">help</span></span><br></pre></td></tr></table></figure>

<h3 id="查看磁盘使用情况"><a href="#查看磁盘使用情况" class="headerlink" title="查看磁盘使用情况"></a>查看磁盘使用情况</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker system <span class="built_in">df</span> -v</span><br><span class="line"><span class="comment"># -v 表示verbose, 查看详情。</span></span><br></pre></td></tr></table></figure>

<h3 id="获取服务日志"><a href="#获取服务日志" class="headerlink" title="获取服务日志"></a>获取服务日志</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker system</span><br></pre></td></tr></table></figure>

<h3 id="获取实时事件"><a href="#获取实时事件" class="headerlink" title="获取实时事件"></a>获取实时事件</h3><p>该命令类似于查看日志，可添加 –since、–until 可选项。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker system events</span><br></pre></td></tr></table></figure>

<h3 id="移除不使用的数据"><a href="#移除不使用的数据" class="headerlink" title="移除不使用的数据"></a>移除不使用的数据</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker system prune</span><br></pre></td></tr></table></figure>

<p>将移除一下类型数据：</p>
<ul>
<li>all stopped containers</li>
<li>all networks not used by at least one container</li>
<li>all dangling images</li>
<li>all dangling build cache</li>
</ul>
<h2 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h2><h3 id="查看所有网络"><a href="#查看所有网络" class="headerlink" title="查看所有网络"></a>查看所有网络</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network <span class="built_in">ls</span></span><br></pre></td></tr></table></figure>

<h3 id="创建网络"><a href="#创建网络" class="headerlink" title="创建网络"></a>创建网络</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker create -d [driver类型] [网络名]</span><br></pre></td></tr></table></figure>

<h3 id="创建容器指定bridge"><a href="#创建容器指定bridge" class="headerlink" title="创建容器指定bridge"></a>创建容器指定bridge</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --network [网络标识] [镜像标识]</span><br></pre></td></tr></table></figure>

<h3 id="指定容器和bridge网络链接"><a href="#指定容器和bridge网络链接" class="headerlink" title="指定容器和bridge网络链接"></a>指定容器和bridge网络链接</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network connect [网络标识] [容器标识]</span><br></pre></td></tr></table></figure>

<h3 id="创建容器指定和别的容器共享网卡"><a href="#创建容器指定和别的容器共享网卡" class="headerlink" title="创建容器指定和别的容器共享网卡"></a>创建容器指定和别的容器共享网卡</h3><p>新创建的容器用inspect查不到网卡。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --network container:[容器标识] [镜像标识]</span><br></pre></td></tr></table></figure>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>请我一杯咖啡吧！</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/downloads/images/reward/wechatpay.png" alt="唐李锦 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="/downloads/images/reward/alipay.png" alt="唐李锦 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>

          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>唐李锦
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://www.tanglijin.top/2023/03/docker-study-2/" title="Docker 学习 2. 常用命令">https://www.tanglijin.top/2023/03/docker-study-2/</a>
  </li>
  <li class="post-copyright-license">
      <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/Docker/" rel="tag"><i class="fa fa-tag"></i> Docker</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2023/03/docker-study-1/" rel="prev" title="Docker 学习 1. 原理">
                  <i class="fa fa-chevron-left"></i> Docker 学习 1. 原理
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2023/03/docker-study-3/" rel="next" title="Docker 学习 3. 编写 Dockerfile">
                  Docker 学习 3. 编写 Dockerfile <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments utterances-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2022 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">唐李锦</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script size="300" alpha="0.6" zIndex="-1" src="https://cdnjs.cloudflare.com/ajax/libs/ribbon.js/1.0.2/ribbon.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/algoliasearch/4.17.1/algoliasearch-lite.umd.js" integrity="sha256-F7emIId74fYoGrHzsnu3iClRHIbBMhMCbxDoA1cfMAY=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/instantsearch.js/4.56.1/instantsearch.production.min.js" integrity="sha256-lz9C+x8+6w2rh56x5TrH5iYmE4Js2FiJS5h0tuMz7hQ=" crossorigin="anonymous"></script><script src="/js/third-party/search/algolia-search.js"></script>




  <script src="/js/third-party/fancybox.js"></script>

  <script src="/js/third-party/pace.js"></script>


  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"ljtang2009/blog","issue_term":"pathname","theme":"preferred-color-scheme","label":"Utteranc"}</script>
<script src="/js/third-party/comments/utterances.js"></script>

</body>
</html>
